generator client {
  provider = "prisma-client-js"
  output   = "../src/generated/prisma"
}

datasource db {
  provider = "mongodb"
  url      = env("DATABASE_URL")
}

model Usuario {
  id                   String         @id @default(auto()) @map("_id") @db.ObjectId
  nome                 String
  email                String         @unique
  senha                String
  anoIngressoFaculdade Int
  idTipoUsuario        String         @db.ObjectId
  tipoUsuario          TipoUsuario    @relation(fields: [idTipoUsuario], references: [id])
  relacoesCursos       UsuarioCurso[]
  dataCriacao          DateTime       @default(now())
}

model TipoUsuario {
  id          String    @id @default(auto()) @map("_id") @db.ObjectId
  tipoUsuario String    @unique
  usuarios    Usuario[]
}

model Curso {
  id               String         @id @default(auto()) @map("_id") @db.ObjectId
  nome             String         @unique
  sigla            String         @unique
  relacoesUsuarios UsuarioCurso[]
}

model UsuarioCurso {
  id        String  @id @default(auto()) @map("_id") @db.ObjectId
  usuario   Usuario @relation(fields: [usuarioId], references: [id])
  usuarioId String  @db.ObjectId
  curso     Curso   @relation(fields: [cursoId], references: [id])
  cursoId   String  @db.ObjectId

  @@unique([usuarioId, cursoId])
}
